<!DOCTYPE html>
<html lang="en">
<head>
<title>Biblioteca central AO</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
</head>
<body>
    <div class="container">
        <h1 style="text-align: center; font-family: Roboto;">SOLICITAR LIBRO </h1>
        <div class="d-flex justify-content-center">
            <img src="images/solicitar.jpg" alt="BIBLIOTECA" class="img-fluid" style="max-width: 50%; height: auto;">
        </div>
    </div>
    <br><br>
    <div class="container">
        <div class="d-flex justify-content-center">
            <div class="btn-group-vertical">
                <a href="BibliotecaCentralAO.html" class="btn btn-warning">Inicio</a>
                <a href="LibrosDisponibles.html" class="btn btn-primary">Libros Disponibles</a>
                <a href="Sucursales.html" class="btn btn-danger">Sucursales</a>
                <a href="Registro.html" class="btn btn-success">Registro</a>
            </div>
        </div>
    </div>
    <br><br>

    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-center">Solicitud de Libro</h3>
                    </div>
                    <div class="card-body">
                        <form action="Solicitud.php" method="GET">
                            <div class="form-group">
                                <label for="nombre">Nombre</label>
                                <input type="text" name="nombre" id="nombre" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="correo">Correo</label>
                                <input type="text" name="correo" id="correo" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="libro">Libro</label>
                                <input type="text" name="libro" id="libro" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="autor">Autor</label>
                                <input type="text" name="autor" id="autor" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="id">ID del libro</label>
                                <input type="text" name="id" id="id" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="fecha_solicitud">Fecha de Solicitud</label>
                                <input type="date" name="fecha_solicitud" id="fecha_solicitud" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="fecha_entrega">Fecha de Entrega</label>
                                <input type="date" name="fecha_entrega" id="fecha_entrega" class="form-control" required>
                            </div>
                            
  
                            <div class="form-group">
                                <br><br>
                                <button type="submit" class="btn btn-warning btn-block">Solicitar Libro</button>
                            </div>

                
                        </form>

                        <div class="form-group">
                            <br><br>
                            <button type="button" id="calcular_tarifa_btn" class="btn btn-success btn-block">Calcular Tarifa</button>
                        </div>
                        <!-- Campo oculto para mostrar la tarifa total -->
                        <div class="form-group">
                            <label for="tarifa_total">Tarifa Total</label>
                            <input type="text" name="tarifa_total" id="tarifa_total" class="form-control" readonly>
                        </div>
                       
                        <div class="form-group">
                            <br><br>
                            <button type="button" id="calcular_descuento_btn" class="btn btn-success btn-block">Aplicar Descuento</button>
                        </div>
                        <div class="form-group">
                            <label for="cupon">Inserta tu cupón</label>
                            <input type="text" name="cupon" id="cupon" class="form-control" required>
                        </div>


                        <script>
                            // Función para calcular la tarifa de alquiler
                            function calcularTarifa() {
                                var fechaSolicitud = new Date(document.getElementById("fecha_solicitud").value);
                                var fechaEntrega = new Date(document.getElementById("fecha_entrega").value);
                                
                                var diferenciaTiempo = fechaEntrega.getTime() - fechaSolicitud.getTime();
                                var diferenciaDias = diferenciaTiempo / (1000 * 3600 * 24);
                                
                                var precioPorDia = 2.5; 
                                
                                var tarifaTotal = diferenciaDias * precioPorDia;
                        
                                document.getElementById("tarifa_total").value = "$" + tarifaTotal.toFixed(2);
                            }
                        
                            function AplicarDescuento() {
                                var cupon = document.getElementById("cupon").value; // Obtener el valor del cupón
                            
                                // Comprobar si el cupón es válido y aplicar el descuento
                                if (cupon === "DESCUENTOMAYO"||"CUPONBIENVENIDO"||"CUPONCUMPLEAÑERO") {
                                    var descuento = 10; // Descuento del 10%
                                    var tarifaTotal = parseFloat(document.getElementById("tarifa_total").value.replace("$", ""));
                                    var tarifaConDescuento = tarifaTotal - (tarifaTotal * (descuento / 100));
                            
                                    // Mostrar la tarifa con descuento en el campo de texto
                                    document.getElementById("tarifa_total").value = "$" + tarifaConDescuento.toFixed(2);
                                } else {
                                    // Mostrar un mensaje de cupón no válido
                                    document.getElementById("tarifa_total").value = "Cupón no válido";
                                }
                            }
                            
                            // Asignar la función calcularTarifa al botón de calcular tarifa
                            document.getElementById("calcular_tarifa_btn").addEventListener("click", calcularTarifa);
                            document.getElementById("calcular_descuento_btn").addEventListener("click", AplicarDescuento);

                        </script>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

  
    
    <br><br>

    </body>
    </html>
